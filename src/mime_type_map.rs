use std::str::from_utf8;

use phf::{Map, phf_map};

pub(crate) const TEXT_HTML: &'static str = "text/html";
pub(crate) const JPEG: &'static str = "image/jpeg";

// mime type, is binary, is attachment
static MIME_TYPES: Map<&'static str, (&'static str, bool, bool)> = phf_map! {

    "css" => ("text/css", false, false),
    "doc" => ("application/msword", true, true),
    "gif" => ("image/gif", true, false),
    "ico" => ("image/x-icon", true, false),
    "html" => (TEXT_HTML, false, false),
    "htm" => (TEXT_HTML, false, false),
    "jpe" => (JPEG, true, false),
    "jpg" => (JPEG, true, false),
    "jpeg" => (JPEG, true, false),
    "log" => ("text/plain", false, false),
    "pdf" => ("application/pdf", true, true),
    "png" => ("image/png", true, false),
    "svg" => ("image/svg+xml", false, false),
    "txt" => ("text/plain", false, false),
    "webp" => ("image/webp", true, false),
    "yaml" => ("application/x-yaml", false, false),
    "xlsx" => ("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", true, true),
    "123" => ("application/vnd.lotus-1-2-3", true, true),
    "3dml" => ("text/vnd.in3d.3dml", true, true),
    "3ds" => ("image/x-3ds", true, true),
    "3g2" => ("video/3gpp2", true, true),
    "3gp" => ("video/3gpp", true, true),
    "7z" => ("application/x-7z-compressed", true, true),
    "aab" => ("application/x-authorware-bin", true, true),
    "aac" => ("audio/x-aac", true, true),
    "aam" => ("application/x-authorware-map", true, true),
    "aas" => ("application/x-authorware-seg", true, true),
    "abs" => ("audio/x-mpeg", true, true),
    "abw" => ("application/x-abiword", true, true),
    "ac" => ("application/pkix-attr-cert", true, true),
    "acc" => ("application/vnd.americandynamics.acc", true, true),
    "ace" => ("application/x-ace-compressed", true, true),
    "acu" => ("application/vnd.acucobol", true, true),
    "acutc" => ("application/vnd.acucorp", true, true),
    "adp" => ("audio/adpcm", true, true),
    "aep" => ("application/vnd.audiograph", true, true),
    "afm" => ("application/x-font-type1", true, true),
    "afp" => ("application/vnd.ibm.modcap", true, true),
    "ahead" => ("application/vnd.ahead.space", true, true),
    "ai" => ("application/postscript", true, true),
    "aif" => ("audio/x-aiff", true, true),
    "aifc" => ("audio/x-aiff", true, true),
    "aiff" => ("audio/x-aiff", true, true),
    "aim" => ("application/x-aim", true, true),
    "air" => ("application/vnd.adobe.air-application-installer-package+zip", true, true),
    "ait" => ("application/vnd.dvb.ait", true, true),
    "ami" => ("application/vnd.amiga.ami", true, true),
    "anx" => ("application/annodex", true, true),
    "apk" => ("application/vnd.android.package-archive", true, true),
    "appcache" => ("text/cache-manifest", true, true),
    "application" => ("application/x-ms-application", true, true),
    "apr" => ("application/vnd.lotus-approach", true, true),
    "arc" => ("application/x-freearc", true, true),
    "art" => ("image/x-jg", true, true),
    "asc" => ("application/pgp-signature", true, true),
    "asf" => ("video/x-ms-asf", true, true),
    "asm" => ("text/x-asm", true, true),
    "aso" => ("application/vnd.accpac.simply.aso", true, true),
    "asx" => ("video/x-ms-asf", true, true),
    "atc" => ("application/vnd.acucorp", true, true),
    "atom" => ("application/atom+xml", true, true),
    "atomcat" => ("application/atomcat+xml", true, true),
    "atomsvc" => ("application/atomsvc+xml", true, true),
    "atx" => ("application/vnd.antix.game-component", true, true),
    "au" => ("audio/basic", true, true),
    "avi" => ("video/x-msvideo", true, true),
    "avx" => ("video/x-rad-screenplay", true, true),
    "aw" => ("application/applixware", true, true),
    "axa" => ("audio/annodex", true, true),
    "axv" => ("video/annodex", true, true),
    "azf" => ("application/vnd.airzip.filesecure.azf", true, true),
    "azs" => ("application/vnd.airzip.filesecure.azs", true, true),
    "azw" => ("application/vnd.amazon.ebook", true, true),
    "bat" => ("application/x-msdownload", true, true),
    "bcpio" => ("application/x-bcpio", true, true),
    "bdf" => ("application/x-font-bdf", true, true),
    "bdm" => ("application/vnd.syncml.dm+wbxml", true, true),
    "bed" => ("application/vnd.realvnc.bed", true, true),
    "bh2" => ("application/vnd.fujitsu.oasysprs", true, true),
    "bin" => ("application/octet-stream", true, true),
    "blb" => ("application/x-blorb", true, true),
    "blorb" => ("application/x-blorb", true, true),
    "bmi" => ("application/vnd.bmi", true, true),
    "bmp" => ("image/bmp", true, true),
    "body" => ("text/html", true, true),
    "book" => ("application/vnd.framemaker", true, true),
    "box" => ("application/vnd.previewsystems.box", true, true),
    "boz" => ("application/x-bzip2", true, true),
    "bpk" => ("application/octet-stream", true, true),
    "btif" => ("image/prs.btif", true, true),
    "bz" => ("application/x-bzip", true, true),
    "bz2" => ("application/x-bzip2", true, true),
    "c" => ("text/x-c", true, true),
    "c11amc" => ("application/vnd.cluetrust.cartomobile-config", true, true),
    "c11amz" => ("application/vnd.cluetrust.cartomobile-config-pkg", true, true),
    "c4d" => ("application/vnd.clonk.c4group", true, true),
    "c4f" => ("application/vnd.clonk.c4group", true, true),
    "c4g" => ("application/vnd.clonk.c4group", true, true),
    "c4p" => ("application/vnd.clonk.c4group", true, true),
    "c4u" => ("application/vnd.clonk.c4group", true, true),
    "cab" => ("application/vnd.ms-cab-compressed", true, true),
    "caf" => ("audio/x-caf", true, true),
    "cap" => ("application/vnd.tcpdump.pcap", true, true),
    "car" => ("application/vnd.curl.car", true, true),
    "cat" => ("application/vnd.ms-pki.seccat", true, true),
    "cb7" => ("application/x-cbr", true, true),
    "cba" => ("application/x-cbr", true, true),
    "cbr" => ("application/x-cbr", true, true),
    "cbt" => ("application/x-cbr", true, true),
    "cbz" => ("application/x-cbr", true, true),
    "cc" => ("text/x-c", true, true),
    "cct" => ("application/x-director", true, true),
    "ccxml" => ("application/ccxml+xml", true, true),
    "cdbcmsg" => ("application/vnd.contact.cmsg", true, true),
    "cdf" => ("application/x-cdf", true, true),
    "cdkey" => ("application/vnd.mediastation.cdkey", true, true),
    "cdmia" => ("application/cdmi-capability", true, true),
    "cdmic" => ("application/cdmi-container", true, true),
    "cdmid" => ("application/cdmi-domain", true, true),
    "cdmio" => ("application/cdmi-object", true, true),
    "cdmiq" => ("application/cdmi-queue", true, true),
    "cdx" => ("chemical/x-cdx", true, true),
    "cdxml" => ("application/vnd.chemdraw+xml", true, true),
    "cdy" => ("application/vnd.cinderella", true, true),
    "cer" => ("application/pkix-cert", true, true),
    "cfs" => ("application/x-cfs-compressed", true, true),
    "cgm" => ("image/cgm", true, true),
    "chat" => ("application/x-chat", true, true),
    "chm" => ("application/vnd.ms-htmlhelp", true, true),
    "chrt" => ("application/vnd.kde.kchart", true, true),
    "cif" => ("chemical/x-cif", true, true),
    "cii" => ("application/vnd.anser-web-certificate-issue-initiation", true, true),
    "cil" => ("application/vnd.ms-artgalry", true, true),
    "cla" => ("application/vnd.claymore", true, true),
    "class" => ("application/java", true, true),
    "clkk" => ("application/vnd.crick.clicker.keyboard", true, true),
    "clkp" => ("application/vnd.crick.clicker.palette", true, true),
    "clkt" => ("application/vnd.crick.clicker.template", true, true),
    "clkw" => ("application/vnd.crick.clicker.wordbank", true, true),
    "clkx" => ("application/vnd.crick.clicker", true, true),
    "clp" => ("application/x-msclip", true, true),
    "cmc" => ("application/vnd.cosmocaller", true, true),
    "cmdf" => ("chemical/x-cmdf", true, true),
    "cml" => ("chemical/x-cml", true, true),
    "cmp" => ("application/vnd.yellowriver-custom-menu", true, true),
    "cmx" => ("image/x-cmx", true, true),
    "cod" => ("application/vnd.rim.cod", true, true),
    "com" => ("application/x-msdownload", true, true),
    "conf" => ("text/plain", true, true),
    "cpio" => ("application/x-cpio", true, true),
    "cpp" => ("text/x-c", true, true),
    "cpt" => ("application/mac-compactpro", true, true),
    "crd" => ("application/x-mscardfile", true, true),
    "crl" => ("application/pkix-crl", true, true),
    "crt" => ("application/x-x509-ca-cert", true, true),
    "cryptonote" => ("application/vnd.rig.cryptonote", true, true),
    "csh" => ("application/x-csh", true, true),
    "csml" => ("chemical/x-csml", true, true),
    "csp" => ("application/vnd.commonspace", true, true),
    "cst" => ("application/x-director", true, true),
    "csv" => ("text/csv", true, true),
    "cu" => ("application/cu-seeme", true, true),
    "curl" => ("text/vnd.curl", true, true),
    "cww" => ("application/prs.cww", true, true),
    "cxt" => ("application/x-director", true, true),
    "cxx" => ("text/x-c", true, true),
    "dae" => ("model/vnd.collada+xml", true, true),
    "daf" => ("application/vnd.mobius.daf", true, true),
    "dart" => ("application/vnd.dart", true, true),
    "dataless" => ("application/vnd.fdsn.seed", true, true),
    "davmount" => ("application/davmount+xml", true, true),
    "dbk" => ("application/docbook+xml", true, true),
    "dcr" => ("application/x-director", true, true),
    "dcurl" => ("text/vnd.curl.dcurl", true, true),
    "dd2" => ("application/vnd.oma.dd2+xml", true, true),
    "ddd" => ("application/vnd.fujixerox.ddd", true, true),
    "deb" => ("application/x-debian-package", true, true),
    "def" => ("text/plain", true, true),
    "deploy" => ("application/octet-stream", true, true),
    "der" => ("application/x-x509-ca-cert", true, true),
    "dfac" => ("application/vnd.dreamfactory", true, true),
    "dgc" => ("application/x-dgc-compressed", true, true),
    "dib" => ("image/bmp", true, true),
    "dic" => ("text/x-c", true, true),
    "dir" => ("application/x-director", true, true),
    "dis" => ("application/vnd.mobius.dis", true, true),
    "dist" => ("application/octet-stream", true, true),
    "distz" => ("application/octet-stream", true, true),
    "djv" => ("image/vnd.djvu", true, true),
    "djvu" => ("image/vnd.djvu", true, true),
    "dll" => ("application/x-msdownload", true, true),
    "dmg" => ("application/x-apple-diskimage", true, true),
    "dmp" => ("application/vnd.tcpdump.pcap", true, true),
    "dms" => ("application/octet-stream", true, true),
    "dna" => ("application/vnd.dna", true, true),
    "docm" => ("application/vnd.ms-word.document.macroenabled.12", true, true),
    "docx" => ("application/vnd.openxmlformats-officedocument.wordprocessingml.document", true, true),
    "dot" => ("application/msword", true, true),
    "dotm" => ("application/vnd.ms-word.template.macroenabled.12", true, true),
    "dotx" => ("application/vnd.openxmlformats-officedocument.wordprocessingml.template", true, true),
    "dp" => ("application/vnd.osgi.dp", true, true),
    "dpg" => ("application/vnd.dpgraph", true, true),
    "dra" => ("audio/vnd.dra", true, true),
    "dsc" => ("text/prs.lines.tag", true, true),
    "dssc" => ("application/dssc+der", true, true),
    "dtb" => ("application/x-dtbook+xml", true, true),
    "dtd" => ("application/xml-dtd", true, true),
    "dts" => ("audio/vnd.dts", true, true),
    "dtshd" => ("audio/vnd.dts.hd", true, true),
    "dump" => ("application/octet-stream", true, true),
    "dv" => ("video/x-dv", true, true),
    "dvb" => ("video/vnd.dvb.file", true, true),
    "dvi" => ("application/x-dvi", true, true),
    "dwf" => ("model/vnd.dwf", true, true),
    "dwg" => ("image/vnd.dwg", true, true),
    "dxf" => ("image/vnd.dxf", true, true),
    "dxp" => ("application/vnd.spotfire.dxp", true, true),
    "dxr" => ("application/x-director", true, true),
    "ecelp4800" => ("audio/vnd.nuera.ecelp4800", true, true),
    "ecelp7470" => ("audio/vnd.nuera.ecelp7470", true, true),
    "ecelp9600" => ("audio/vnd.nuera.ecelp9600", true, true),
    "ecma" => ("application/ecmascript", true, true),
    "edm" => ("application/vnd.novadigm.edm", true, true),
    "edx" => ("application/vnd.novadigm.edx", true, true),
    "efif" => ("application/vnd.picsel", true, true),
    "ei6" => ("application/vnd.pg.osasli", true, true),
    "elc" => ("application/octet-stream", true, true),
    "emf" => ("application/x-msmetafile", true, true),
    "eml" => ("message/rfc822", true, true),
    "emma" => ("application/emma+xml", true, true),
    "emz" => ("application/x-msmetafile", true, true),
    "eol" => ("audio/vnd.digital-winds", true, true),
    "eot" => ("application/vnd.ms-fontobject", true, true),
    "eps" => ("application/postscript", true, true),
    "epub" => ("application/epub+zip", true, true),
    "es3" => ("application/vnd.eszigno3+xml", true, true),
    "esa" => ("application/vnd.osgi.subsystem", true, true),
    "esf" => ("application/vnd.epson.esf", true, true),
    "et3" => ("application/vnd.eszigno3+xml", true, true),
    "etx" => ("text/x-setext", true, true),
    "eva" => ("application/x-eva", true, true),
    "evy" => ("application/x-envoy", true, true),
    "exe" => ("application/octet-stream", true, true),
    "exi" => ("application/exi", true, true),
    "ext" => ("application/vnd.novadigm.ext", true, true),
    "ez" => ("application/andrew-inset", true, true),
    "ez2" => ("application/vnd.ezpix-album", true, true),
    "ez3" => ("application/vnd.ezpix-package", true, true),
    "f" => ("text/x-fortran", true, true),
    "f4v" => ("video/x-f4v", true, true),
    "f77" => ("text/x-fortran", true, true),
    "f90" => ("text/x-fortran", true, true),
    "fbs" => ("image/vnd.fastbidsheet", true, true),
    "fcdt" => ("application/vnd.adobe.formscentral.fcdt", true, true),
    "fcs" => ("application/vnd.isac.fcs", true, true),
    "fdf" => ("application/vnd.fdf", true, true),
    "fe_launch" => ("application/vnd.denovo.fcselayout-link", true, true),
    "fg5" => ("application/vnd.fujitsu.oasysgp", true, true),
    "fgd" => ("application/x-director", true, true),
    "fh" => ("image/x-freehand", true, true),
    "fh4" => ("image/x-freehand", true, true),
    "fh5" => ("image/x-freehand", true, true),
    "fh7" => ("image/x-freehand", true, true),
    "fhc" => ("image/x-freehand", true, true),
    "fig" => ("application/x-xfig", true, true),
    "flac" => ("audio/flac", true, true),
    "fli" => ("video/x-fli", true, true),
    "flo" => ("application/vnd.micrografx.flo", true, true),
    "flv" => ("video/x-flv", true, true),
    "flw" => ("application/vnd.kde.kivio", true, true),
    "flx" => ("text/vnd.fmi.flexstor", true, true),
    "fly" => ("text/vnd.fly", true, true),
    "fm" => ("application/vnd.framemaker", true, true),
    "fnc" => ("application/vnd.frogans.fnc", true, true),
    "for" => ("text/x-fortran", true, true),
    "fpx" => ("image/vnd.fpx", true, true),
    "frame" => ("application/vnd.framemaker", true, true),
    "fsc" => ("application/vnd.fsc.weblaunch", true, true),
    "fst" => ("image/vnd.fst", true, true),
    "ftc" => ("application/vnd.fluxtime.clip", true, true),
    "fti" => ("application/vnd.anser-web-funds-transfer-initiation", true, true),
    "fvt" => ("video/vnd.fvt", true, true),
    "fxp" => ("application/vnd.adobe.fxp", true, true),
    "fxpl" => ("application/vnd.adobe.fxp", true, true),
    "fzs" => ("application/vnd.fuzzysheet", true, true),
    "g2w" => ("application/vnd.geoplan", true, true),
    "g3" => ("image/g3fax", true, true),
    "g3w" => ("application/vnd.geospace", true, true),
    "gac" => ("application/vnd.groove-account", true, true),
    "gam" => ("application/x-tads", true, true),
    "gbr" => ("application/rpki-ghostbusters", true, true),
    "gca" => ("application/x-gca-compressed", true, true),
    "gdl" => ("model/vnd.gdl", true, true),
    "geo" => ("application/vnd.dynageo", true, true),
    "gex" => ("application/vnd.geometry-explorer", true, true),
    "ggb" => ("application/vnd.geogebra.file", true, true),
    "ggt" => ("application/vnd.geogebra.tool", true, true),
    "ghf" => ("application/vnd.groove-help", true, true),
    "gim" => ("application/vnd.groove-identity-message", true, true),
    "gml" => ("application/gml+xml", true, true),
    "gmx" => ("application/vnd.gmx", true, true),
    "gnumeric" => ("application/x-gnumeric", true, true),
    "gph" => ("application/vnd.flographit", true, true),
    "gpx" => ("application/gpx+xml", true, true),
    "gqf" => ("application/vnd.grafeq", true, true),
    "gqs" => ("application/vnd.grafeq", true, true),
    "gram" => ("application/srgs", true, true),
    "gramps" => ("application/x-gramps-xml", true, true),
    "gre" => ("application/vnd.geometry-explorer", true, true),
    "grv" => ("application/vnd.groove-injector", true, true),
    "grxml" => ("application/srgs+xml", true, true),
    "gsf" => ("application/x-font-ghostscript", true, true),
    "gtar" => ("application/x-gtar", true, true),
    "gtm" => ("application/vnd.groove-tool-message", true, true),
    "gtw" => ("model/vnd.gtw", true, true),
    "gv" => ("text/vnd.graphviz", true, true),
    "gxf" => ("application/gxf", true, true),
    "gxt" => ("application/vnd.geonext", true, true),
    "gz" => ("application/x-gzip", true, true),
    "h" => ("text/x-c", true, true),
    "h261" => ("video/h261", true, true),
    "h263" => ("video/h263", true, true),
    "h264" => ("video/h264", true, true),
    "hal" => ("application/vnd.hal+xml", true, true),
    "hbci" => ("application/vnd.hbci", true, true),
    "hdf" => ("application/x-hdf", true, true),
    "hh" => ("text/x-c", true, true),
    "hlp" => ("application/winhlp", true, true),
    "hpgl" => ("application/vnd.hp-hpgl", true, true),
    "hpid" => ("application/vnd.hp-hpid", true, true),
    "hps" => ("application/vnd.hp-hps", true, true),
    "hqx" => ("application/mac-binhex40", true, true),
    "htc" => ("text/x-component", true, true),
    "htke" => ("application/vnd.kenameaapp", true, true),
    "hvd" => ("application/vnd.yamaha.hv-dic", true, true),
    "hvp" => ("application/vnd.yamaha.hv-voice", true, true),
    "hvs" => ("application/vnd.yamaha.hv-script", true, true),
    "i2g" => ("application/vnd.intergeo", true, true),
    "icc" => ("application/vnd.iccprofile", true, true),
    "ice" => ("x-conference/x-cooltalk", true, true),
    "icm" => ("application/vnd.iccprofile", true, true),
    "ics" => ("text/calendar", true, true),
    "ief" => ("image/ief", true, true),
    "ifb" => ("text/calendar", true, true),
    "ifm" => ("application/vnd.shana.informed.formdata", true, true),
    "iges" => ("model/iges", true, true),
    "igl" => ("application/vnd.igloader", true, true),
    "igm" => ("application/vnd.insors.igm", true, true),
    "igs" => ("model/iges", true, true),
    "igx" => ("application/vnd.micrografx.igx", true, true),
    "iif" => ("application/vnd.shana.informed.interchange", true, true),
    "imp" => ("application/vnd.accpac.simply.imp", true, true),
    "ims" => ("application/vnd.ms-ims", true, true),
    "in" => ("text/plain", true, true),
    "ink" => ("application/inkml+xml", true, true),
    "inkml" => ("application/inkml+xml", true, true),
    "install" => ("application/x-install-instructions", true, true),
    "iota" => ("application/vnd.astraea-software.iota", true, true),
    "ipfix" => ("application/ipfix", true, true),
    "ipk" => ("application/vnd.shana.informed.package", true, true),
    "irm" => ("application/vnd.ibm.rights-management", true, true),
    "irp" => ("application/vnd.irepository.package+xml", true, true),
    "iso" => ("application/x-iso9660-image", true, true),
    "itp" => ("application/vnd.shana.informed.formtemplate", true, true),
    "ivp" => ("application/vnd.immervision-ivp", true, true),
    "ivu" => ("application/vnd.immervision-ivu", true, true),
    "jad" => ("text/vnd.sun.j2me.app-descriptor", true, true),
    "jam" => ("application/vnd.jam", true, true),
    "jar" => ("application/java-archive", true, true),
    "java" => ("text/x-java-source", true, true),
    "jisp" => ("application/vnd.jisp", true, true),
    "jlt" => ("application/vnd.hp-jlyt", true, true),
    "jnlp" => ("application/x-java-jnlp-file", true, true),
    "joda" => ("application/vnd.joost.joda-archive", true, true),
    "jpgm" => ("video/jpm", true, true),
    "jpgv" => ("video/jpeg", true, true),
    "jpm" => ("video/jpm", true, true),
    "js" => ("application/javascript", true, true),
    "jsf" => ("text/plain", true, true),
    "json" => ("application/json", true, true),
    "jsonml" => ("application/jsonml+json", true, true),
    "jspf" => ("text/plain", true, true),
    "kar" => ("audio/midi", true, true),
    "karbon" => ("application/vnd.kde.karbon", true, true),
    "kfo" => ("application/vnd.kde.kformula", true, true),
    "kia" => ("application/vnd.kidspiration", true, true),
    "kml" => ("application/vnd.google-earth.kml+xml", true, true),
    "kmz" => ("application/vnd.google-earth.kmz", true, true),
    "kne" => ("application/vnd.kinar", true, true),
    "knp" => ("application/vnd.kinar", true, true),
    "kon" => ("application/vnd.kde.kontour", true, true),
    "kpr" => ("application/vnd.kde.kpresenter", true, true),
    "kpt" => ("application/vnd.kde.kpresenter", true, true),
    "kpxx" => ("application/vnd.ds-keypoint", true, true),
    "ksp" => ("application/vnd.kde.kspread", true, true),
    "ktr" => ("application/vnd.kahootz", true, true),
    "ktx" => ("image/ktx", true, true),
    "ktz" => ("application/vnd.kahootz", true, true),
    "kwd" => ("application/vnd.kde.kword", true, true),
    "kwt" => ("application/vnd.kde.kword", true, true),
    "lasxml" => ("application/vnd.las.las+xml", true, true),
    "latex" => ("application/x-latex", true, true),
    "lbd" => ("application/vnd.llamagraphics.life-balance.desktop", true, true),
    "lbe" => ("application/vnd.llamagraphics.life-balance.exchange+xml", true, true),
    "les" => ("application/vnd.hhe.lesson-player", true, true),
    "lha" => ("application/x-lzh-compressed", true, true),
    "link66" => ("application/vnd.route66.link66+xml", true, true),
    "list" => ("text/plain", true, true),
    "list3820" => ("application/vnd.ibm.modcap", true, true),
    "listafp" => ("application/vnd.ibm.modcap", true, true),
    "lnk" => ("application/x-ms-shortcut", true, true),
    "lostxml" => ("application/lost+xml", true, true),
    "lrf" => ("application/octet-stream", true, true),
    "lrm" => ("application/vnd.ms-lrm", true, true),
    "ltf" => ("application/vnd.frogans.ltf", true, true),
    "lvp" => ("audio/vnd.lucent.voice", true, true),
    "lwp" => ("application/vnd.lotus-wordpro", true, true),
    "lzh" => ("application/x-lzh-compressed", true, true),
    "m13" => ("application/x-msmediaview", true, true),
    "m14" => ("application/x-msmediaview", true, true),
    "m1v" => ("video/mpeg", true, true),
    "m21" => ("application/mp21", true, true),
    "m2a" => ("audio/mpeg", true, true),
    "m2v" => ("video/mpeg", true, true),
    "m3a" => ("audio/mpeg", true, true),
    "m3u" => ("audio/x-mpegurl", true, true),
    "m3u8" => ("application/vnd.apple.mpegurl", true, true),
    "m4a" => ("audio/mp4", true, true),
    "m4b" => ("audio/mp4", true, true),
    "m4r" => ("audio/mp4", true, true),
    "m4u" => ("video/vnd.mpegurl", true, true),
    "m4v" => ("video/mp4", true, true),
    "ma" => ("application/mathematica", true, true),
    "mac" => ("image/x-macpaint", true, true),
    "mads" => ("application/mads+xml", true, true),
    "mag" => ("application/vnd.ecowin.chart", true, true),
    "maker" => ("application/vnd.framemaker", true, true),
    "man" => ("text/troff", true, true),
    "mar" => ("application/octet-stream", true, true),
    "mathml" => ("application/mathml+xml", true, true),
    "mb" => ("application/mathematica", true, true),
    "mbk" => ("application/vnd.mobius.mbk", true, true),
    "mbox" => ("application/mbox", true, true),
    "mc1" => ("application/vnd.medcalcdata", true, true),
    "mcd" => ("application/vnd.mcd", true, true),
    "mcurl" => ("text/vnd.curl.mcurl", true, true),
    "mdb" => ("application/x-msaccess", true, true),
    "mdi" => ("image/vnd.ms-modi", true, true),
    "me" => ("text/troff", true, true),
    "mesh" => ("model/mesh", true, true),
    "meta4" => ("application/metalink4+xml", true, true),
    "metalink" => ("application/metalink+xml", true, true),
    "mets" => ("application/mets+xml", true, true),
    "mfm" => ("application/vnd.mfmp", true, true),
    "mft" => ("application/rpki-manifest", true, true),
    "mgp" => ("application/vnd.osgeo.mapguide.package", true, true),
    "mgz" => ("application/vnd.proteus.magazine", true, true),
    "mid" => ("audio/midi", true, true),
    "midi" => ("audio/midi", true, true),
    "mie" => ("application/x-mie", true, true),
    "mif" => ("application/x-mif", true, true),
    "mime" => ("message/rfc822", true, true),
    "mj2" => ("video/mj2", true, true),
    "mjp2" => ("video/mj2", true, true),
    "mk3d" => ("video/x-matroska", true, true),
    "mka" => ("audio/x-matroska", true, true),
    "mks" => ("video/x-matroska", true, true),
    "mkv" => ("video/x-matroska", true, true),
    "mlp" => ("application/vnd.dolby.mlp", true, true),
    "mmd" => ("application/vnd.chipnuts.karaoke-mmd", true, true),
    "mmf" => ("application/vnd.smaf", true, true),
    "mmr" => ("image/vnd.fujixerox.edmics-mmr", true, true),
    "mng" => ("video/x-mng", true, true),
    "mny" => ("application/x-msmoney", true, true),
    "mobi" => ("application/x-mobipocket-ebook", true, true),
    "mods" => ("application/mods+xml", true, true),
    "mov" => ("video/quicktime", true, true),
    "movie" => ("video/x-sgi-movie", true, true),
    "mp1" => ("audio/mpeg", true, true),
    "mp2" => ("audio/mpeg", true, true),
    "mp21" => ("application/mp21", true, true),
    "mp2a" => ("audio/mpeg", true, true),
    "mp3" => ("audio/mpeg", true, true),
    "mp4" => ("video/mp4", true, true),
    "mp4a" => ("audio/mp4", true, true),
    "mp4s" => ("application/mp4", true, true),
    "mp4v" => ("video/mp4", true, true),
    "mpa" => ("audio/mpeg", true, true),
    "mpc" => ("application/vnd.mophun.certificate", true, true),
    "mpe" => ("video/mpeg", true, true),
    "mpeg" => ("video/mpeg", true, true),
    "mpega" => ("audio/x-mpeg", true, true),
    "mpg" => ("video/mpeg", true, true),
    "mpg4" => ("video/mp4", true, true),
    "mpga" => ("audio/mpeg", true, true),
    "mpkg" => ("application/vnd.apple.installer+xml", true, true),
    "mpm" => ("application/vnd.blueice.multipass", true, true),
    "mpn" => ("application/vnd.mophun.application", true, true),
    "mpp" => ("application/vnd.ms-project", true, true),
    "mpt" => ("application/vnd.ms-project", true, true),
    "mpv2" => ("video/mpeg2", true, true),
    "mpy" => ("application/vnd.ibm.minipay", true, true),
    "mqy" => ("application/vnd.mobius.mqy", true, true),
    "mrc" => ("application/marc", true, true),
    "mrcx" => ("application/marcxml+xml", true, true),
    "ms" => ("text/troff", true, true),
    "mscml" => ("application/mediaservercontrol+xml", true, true),
    "mseed" => ("application/vnd.fdsn.mseed", true, true),
    "mseq" => ("application/vnd.mseq", true, true),
    "msf" => ("application/vnd.epson.msf", true, true),
    "msh" => ("model/mesh", true, true),
    "msi" => ("application/x-msdownload", true, true),
    "msl" => ("application/vnd.mobius.msl", true, true),
    "msty" => ("application/vnd.muvee.style", true, true),
    "mts" => ("model/vnd.mts", true, true),
    "mus" => ("application/vnd.musician", true, true),
    "musicxml" => ("application/vnd.recordare.musicxml+xml", true, true),
    "mvb" => ("application/x-msmediaview", true, true),
    "mwf" => ("application/vnd.mfer", true, true),
    "mxf" => ("application/mxf", true, true),
    "mxl" => ("application/vnd.recordare.musicxml", true, true),
    "mxml" => ("application/xv+xml", true, true),
    "mxs" => ("application/vnd.triscape.mxs", true, true),
    "mxu" => ("video/vnd.mpegurl", true, true),
    "n-gage" => ("application/vnd.nokia.n-gage.symbian.install", true, true),
    "n3" => ("text/n3", true, true),
    "nb" => ("application/mathematica", true, true),
    "nbp" => ("application/vnd.wolfram.player", true, true),
    "nc" => ("application/x-netcdf", true, true),
    "ncx" => ("application/x-dtbncx+xml", true, true),
    "nfo" => ("text/x-nfo", true, true),
    "ngdat" => ("application/vnd.nokia.n-gage.data", true, true),
    "nitf" => ("application/vnd.nitf", true, true),
    "nlu" => ("application/vnd.neurolanguage.nlu", true, true),
    "nml" => ("application/vnd.enliven", true, true),
    "nnd" => ("application/vnd.noblenet-directory", true, true),
    "nns" => ("application/vnd.noblenet-sealer", true, true),
    "nnw" => ("application/vnd.noblenet-web", true, true),
    "npx" => ("image/vnd.net-fpx", true, true),
    "nsc" => ("application/x-conference", true, true),
    "nsf" => ("application/vnd.lotus-notes", true, true),
    "ntf" => ("application/vnd.nitf", true, true),
    "nzb" => ("application/x-nzb", true, true),
    "oa2" => ("application/vnd.fujitsu.oasys2", true, true),
    "oa3" => ("application/vnd.fujitsu.oasys3", true, true),
    "oas" => ("application/vnd.fujitsu.oasys", true, true),
    "obd" => ("application/x-msbinder", true, true),
    "obj" => ("application/x-tgif", true, true),
    "oda" => ("application/oda", true, true),
    "odft" => ("application/vnd.oasis.opendocument.formula-template", true, true),
    "oga" => ("audio/ogg", true, true),
    "ogg" => ("audio/ogg", true, true),
    "ogv" => ("video/ogg", true, true),
    "omdoc" => ("application/omdoc+xml", true, true),
    "onepkg" => ("application/onenote", true, true),
    "onetmp" => ("application/onenote", true, true),
    "onetoc" => ("application/onenote", true, true),
    "onetoc2" => ("application/onenote", true, true),
    "opf" => ("application/oebps-package+xml", true, true),
    "opml" => ("text/x-opml", true, true),
    "oprc" => ("application/vnd.palm", true, true),
    "org" => ("application/vnd.lotus-organizer", true, true),
    "osf" => ("application/vnd.yamaha.openscoreformat", true, true),
    "osfpvg" => ("application/vnd.yamaha.openscoreformat.osfpvg+xml", true, true),
    "otc" => ("application/vnd.oasis.opendocument.chart-template", true, true),
    "otf" => ("font/otf", true, true),
    "oti" => ("application/vnd.oasis.opendocument.image-template", true, true),
    "oxps" => ("application/oxps", true, true),
    "oxt" => ("application/vnd.openofficeorg.extension", true, true),
    "p" => ("text/x-pascal", true, true),
    "p10" => ("application/pkcs10", true, true),
    "p12" => ("application/x-pkcs12", true, true),
    "p7b" => ("application/x-pkcs7-certificates", true, true),
    "p7c" => ("application/pkcs7-mime", true, true),
    "p7m" => ("application/pkcs7-mime", true, true),
    "p7r" => ("application/x-pkcs7-certreqresp", true, true),
    "p7s" => ("application/pkcs7-signature", true, true),
    "p8" => ("application/pkcs8", true, true),
    "pas" => ("text/x-pascal", true, true),
    "paw" => ("application/vnd.pawaafile", true, true),
    "pbd" => ("application/vnd.powerbuilder6", true, true),
    "pbm" => ("image/x-portable-bitmap", true, true),
    "pcap" => ("application/vnd.tcpdump.pcap", true, true),
    "pcf" => ("application/x-font-pcf", true, true),
    "pcl" => ("application/vnd.hp-pcl", true, true),
    "pclxl" => ("application/vnd.hp-pclxl", true, true),
    "pct" => ("image/pict", true, true),
    "pcurl" => ("application/vnd.curl.pcurl", true, true),
    "pcx" => ("image/x-pcx", true, true),
    "pdb" => ("application/vnd.palm", true, true),
    "pfa" => ("application/x-font-type1", true, true),
    "pfb" => ("application/x-font-type1", true, true),
    "pfm" => ("application/x-font-type1", true, true),
    "pfr" => ("application/font-tdpfr", true, true),
    "pfx" => ("application/x-pkcs12", true, true),
    "pgm" => ("image/x-portable-graymap", true, true),
    "pgn" => ("application/x-chess-pgn", true, true),
    "pgp" => ("application/pgp-encrypted", true, true),
    "pic" => ("image/pict", true, true),
    "pict" => ("image/pict", true, true),
    "pkg" => ("application/octet-stream", true, true),
    "pki" => ("application/pkixcmp", true, true),
    "pkipath" => ("application/pkix-pkipath", true, true),
    "plb" => ("application/vnd.3gpp.pic-bw-large", true, true),
    "plc" => ("application/vnd.mobius.plc", true, true),
    "plf" => ("application/vnd.pocketlearn", true, true),
    "pls" => ("audio/x-scpls", true, true),
    "pml" => ("application/vnd.ctc-posml", true, true),
    "pnm" => ("image/x-portable-anymap", true, true),
    "pnt" => ("image/x-macpaint", true, true),
    "portpkg" => ("application/vnd.macports.portpkg", true, true),
    "pot" => ("application/vnd.ms-powerpoint", true, true),
    "potm" => ("application/vnd.ms-powerpoint.template.macroenabled.12", true, true),
    "potx" => ("application/vnd.openxmlformats-officedocument.presentationml.template", true, true),
    "ppam" => ("application/vnd.ms-powerpoint.addin.macroenabled.12", true, true),
    "ppd" => ("application/vnd.cups-ppd", true, true),
    "ppm" => ("image/x-portable-pixmap", true, true),
    "pps" => ("application/vnd.ms-powerpoint", true, true),
    "ppsm" => ("application/vnd.ms-powerpoint.slideshow.macroenabled.12", true, true),
    "ppsx" => ("application/vnd.openxmlformats-officedocument.presentationml.slideshow", true, true),
    "ppt" => ("application/vnd.ms-powerpoint", true, true),
    "pptm" => ("application/vnd.ms-powerpoint.presentation.macroenabled.12", true, true),
    "pptx" => ("application/vnd.openxmlformats-officedocument.presentationml.presentation", true, true),
    "pqa" => ("application/vnd.palm", true, true),
    "prc" => ("application/x-mobipocket-ebook", true, true),
    "pre" => ("application/vnd.lotus-freelance", true, true),
    "prf" => ("application/pics-rules", true, true),
    "ps" => ("application/postscript", true, true),
    "psb" => ("application/vnd.3gpp.pic-bw-small", true, true),
    "psd" => ("image/vnd.adobe.photoshop", true, true),
    "psf" => ("application/x-font-linux-psf", true, true),
    "pskcxml" => ("application/pskc+xml", true, true),
    "ptid" => ("application/vnd.pvi.ptid1", true, true),
    "pub" => ("application/x-mspublisher", true, true),
    "pvb" => ("application/vnd.3gpp.pic-bw-var", true, true),
    "pwn" => ("application/vnd.3m.post-it-notes", true, true),
    "pya" => ("audio/vnd.ms-playready.media.pya", true, true),
    "pyv" => ("video/vnd.ms-playready.media.pyv", true, true),
    "qam" => ("application/vnd.epson.quickanime", true, true),
    "qbo" => ("application/vnd.intu.qbo", true, true),
    "qfx" => ("application/vnd.intu.qfx", true, true),
    "qps" => ("application/vnd.publishare-delta-tree", true, true),
    "qt" => ("video/quicktime", true, true),
    "qti" => ("image/x-quicktime", true, true),
    "qtif" => ("image/x-quicktime", true, true),
    "qwd" => ("application/vnd.quark.quarkxpress", true, true),
    "qwt" => ("application/vnd.quark.quarkxpress", true, true),
    "qxb" => ("application/vnd.quark.quarkxpress", true, true),
    "qxd" => ("application/vnd.quark.quarkxpress", true, true),
    "qxl" => ("application/vnd.quark.quarkxpress", true, true),
    "qxt" => ("application/vnd.quark.quarkxpress", true, true),
    "ra" => ("audio/x-pn-realaudio", true, true),
    "ram" => ("audio/x-pn-realaudio", true, true),
    "rar" => ("application/x-rar-compressed", true, true),
    "ras" => ("image/x-cmu-raster", true, true),
    "rcprofile" => ("application/vnd.ipunplugged.rcprofile", true, true),
    "rdf" => ("application/rdf+xml", true, true),
    "rdz" => ("application/vnd.data-vision.rdz", true, true),
    "rep" => ("application/vnd.businessobjects", true, true),
    "res" => ("application/x-dtbresource+xml", true, true),
    "rgb" => ("image/x-rgb", true, true),
    "rif" => ("application/reginfo+xml", true, true),
    "rip" => ("audio/vnd.rip", true, true),
    "ris" => ("application/x-research-info-systems", true, true),
    "rl" => ("application/resource-lists+xml", true, true),
    "rlc" => ("image/vnd.fujixerox.edmics-rlc", true, true),
    "rld" => ("application/resource-lists-diff+xml", true, true),
    "rm" => ("application/vnd.rn-realmedia", true, true),
    "rmi" => ("audio/midi", true, true),
    "rmp" => ("audio/x-pn-realaudio-plugin", true, true),
    "rms" => ("application/vnd.jcp.javame.midlet-rms", true, true),
    "rmvb" => ("application/vnd.rn-realmedia-vbr", true, true),
    "rnc" => ("application/relax-ng-compact-syntax", true, true),
    "roa" => ("application/rpki-roa", true, true),
    "roff" => ("text/troff", true, true),
    "rp9" => ("application/vnd.cloanto.rp9", true, true),
    "rpss" => ("application/vnd.nokia.radio-presets", true, true),
    "rpst" => ("application/vnd.nokia.radio-preset", true, true),
    "rq" => ("application/sparql-query", true, true),
    "rs" => ("application/rls-services+xml", true, true),
    "rsd" => ("application/rsd+xml", true, true),
    "rss" => ("application/rss+xml", true, true),
    "rtf" => ("application/rtf", true, true),
    "rtx" => ("text/richtext", true, true),
    "s" => ("text/x-asm", true, true),
    "s3m" => ("audio/s3m", true, true),
    "saf" => ("application/vnd.yamaha.smaf-audio", true, true),
    "sbml" => ("application/sbml+xml", true, true),
    "sc" => ("application/vnd.ibm.secure-container", true, true),
    "scd" => ("application/x-msschedule", true, true),
    "scm" => ("application/vnd.lotus-screencam", true, true),
    "scq" => ("application/scvp-cv-request", true, true),
    "scs" => ("application/scvp-cv-response", true, true),
    "scurl" => ("text/vnd.curl.scurl", true, true),
    "sda" => ("application/vnd.stardivision.draw", true, true),
    "sdc" => ("application/vnd.stardivision.calc", true, true),
    "sdd" => ("application/vnd.stardivision.impress", true, true),
    "sdkd" => ("application/vnd.solent.sdkm+xml", true, true),
    "sdkm" => ("application/vnd.solent.sdkm+xml", true, true),
    "sdp" => ("application/sdp", true, true),
    "sdw" => ("application/vnd.stardivision.writer", true, true),
    "see" => ("application/vnd.seemail", true, true),
    "seed" => ("application/vnd.fdsn.seed", true, true),
    "sema" => ("application/vnd.sema", true, true),
    "semd" => ("application/vnd.semd", true, true),
    "semf" => ("application/vnd.semf", true, true),
    "ser" => ("application/java-serialized-object", true, true),
    "setpay" => ("application/set-payment-initiation", true, true),
    "setreg" => ("application/set-registration-initiation", true, true),
    "sfd-hdstx" => ("application/vnd.hydrostatix.sof-data", true, true),
    "sfs" => ("application/vnd.spotfire.sfs", true, true),
    "sfv" => ("text/x-sfv", true, true),
    "sgi" => ("image/sgi", true, true),
    "sgl" => ("application/vnd.stardivision.writer-global", true, true),
    "sgm" => ("text/sgml", true, true),
    "sgml" => ("text/sgml", true, true),
    "sh" => ("application/x-sh", true, true),
    "shar" => ("application/x-shar", true, true),
    "shf" => ("application/shf+xml", true, true),
    "sid" => ("image/x-mrsid-image", true, true),
    "sig" => ("application/pgp-signature", true, true),
    "sil" => ("audio/silk", true, true),
    "silo" => ("model/mesh", true, true),
    "sis" => ("application/vnd.symbian.install", true, true),
    "sisx" => ("application/vnd.symbian.install", true, true),
    "sit" => ("application/x-stuffit", true, true),
    "sitx" => ("application/x-stuffitx", true, true),
    "skd" => ("application/vnd.koan", true, true),
    "skm" => ("application/vnd.koan", true, true),
    "skp" => ("application/vnd.koan", true, true),
    "skt" => ("application/vnd.koan", true, true),
    "sldm" => ("application/vnd.ms-powerpoint.slide.macroenabled.12", true, true),
    "sldx" => ("application/vnd.openxmlformats-officedocument.presentationml.slide", true, true),
    "slt" => ("application/vnd.epson.salt", true, true),
    "sm" => ("application/vnd.stepmania.stepchart", true, true),
    "smf" => ("application/vnd.stardivision.math", true, true),
    "smi" => ("application/smil+xml", true, true),
    "smil" => ("application/smil+xml", true, true),
    "smv" => ("video/x-smv", true, true),
    "smzip" => ("application/vnd.stepmania.package", true, true),
    "snd" => ("audio/basic", true, true),
    "snf" => ("application/x-font-snf", true, true),
    "so" => ("application/octet-stream", true, true),
    "spc" => ("application/x-pkcs7-certificates", true, true),
    "spf" => ("application/vnd.yamaha.smaf-phrase", true, true),
    "spl" => ("application/x-futuresplash", true, true),
    "spot" => ("text/vnd.in3d.spot", true, true),
    "spp" => ("application/scvp-vp-response", true, true),
    "spq" => ("application/scvp-vp-request", true, true),
    "spx" => ("audio/ogg", true, true),
    "sql" => ("application/x-sql", true, true),
    "src" => ("application/x-wais-source", true, true),
    "srt" => ("application/x-subrip", true, true),
    "sru" => ("application/sru+xml", true, true),
    "srx" => ("application/sparql-results+xml", true, true),
    "ssdl" => ("application/ssdl+xml", true, true),
    "sse" => ("application/vnd.kodak-descriptor", true, true),
    "ssf" => ("application/vnd.epson.ssf", true, true),
    "ssml" => ("application/ssml+xml", true, true),
    "st" => ("application/vnd.sailingtracker.track", true, true),
    "stc" => ("application/vnd.sun.xml.calc.template", true, true),
    "std" => ("application/vnd.sun.xml.draw.template", true, true),
    "stf" => ("application/vnd.wt.stf", true, true),
    "sti" => ("application/vnd.sun.xml.impress.template", true, true),
    "stk" => ("application/hyperstudio", true, true),
    "stl" => ("application/vnd.ms-pki.stl", true, true),
    "str" => ("application/vnd.pg.format", true, true),
    "stw" => ("application/vnd.sun.xml.writer.template", true, true),
    "sub" => ("text/vnd.dvb.subtitle", true, true),
    "sus" => ("application/vnd.sus-calendar", true, true),
    "susp" => ("application/vnd.sus-calendar", true, true),
    "sv4cpio" => ("application/x-sv4cpio", true, true),
    "sv4crc" => ("application/x-sv4crc", true, true),
    "svc" => ("application/vnd.dvb.service", true, true),
    "svd" => ("application/vnd.svd", true, true),
    "svgz" => ("image/svg+xml", true, true),
    "swa" => ("application/x-director", true, true),
    "swf" => ("application/x-shockwave-flash", true, true),
    "swi" => ("application/vnd.aristanetworks.swi", true, true),
    "sxc" => ("application/vnd.sun.xml.calc", true, true),
    "sxd" => ("application/vnd.sun.xml.draw", true, true),
    "sxg" => ("application/vnd.sun.xml.writer.global", true, true),
    "sxi" => ("application/vnd.sun.xml.impress", true, true),
    "sxm" => ("application/vnd.sun.xml.math", true, true),
    "sxw" => ("application/vnd.sun.xml.writer", true, true),
    "t" => ("text/troff", true, true),
    "t3" => ("application/x-t3vm-image", true, true),
    "taglet" => ("application/vnd.mynfc", true, true),
    "tao" => ("application/vnd.tao.intent-module-archive", true, true),
    "tar" => ("application/x-tar", true, true),
    "tcap" => ("application/vnd.3gpp2.tcap", true, true),
    "tcl" => ("application/x-tcl", true, true),
    "teacher" => ("application/vnd.smart.teacher", true, true),
    "tei" => ("application/tei+xml", true, true),
    "teicorpus" => ("application/tei+xml", true, true),
    "tex" => ("application/x-tex", true, true),
    "texi" => ("application/x-texinfo", true, true),
    "texinfo" => ("application/x-texinfo", true, true),
    "text" => ("text/plain", true, true),
    "tfi" => ("application/thraud+xml", true, true),
    "tfm" => ("application/x-tex-tfm", true, true),
    "tga" => ("image/x-tga", true, true),
    "thmx" => ("application/vnd.ms-officetheme", true, true),
    "tif" => ("image/tiff", true, true),
    "tiff" => ("image/tiff", true, true),
    "tmo" => ("application/vnd.tmobile-livetv", true, true),
    "torrent" => ("application/x-bittorrent", true, true),
    "tpl" => ("application/vnd.groove-tool-template", true, true),
    "tpt" => ("application/vnd.trid.tpt", true, true),
    "tr" => ("text/troff", true, true),
    "tra" => ("application/vnd.trueapp", true, true),
    "trm" => ("application/x-msterminal", true, true),
    "tsd" => ("application/timestamped-data", true, true),
    "tsv" => ("text/tab-separated-values", true, true),
    "ttc" => ("font/collection", true, true),
    "ttf" => ("font/ttf", true, true),
    "ttl" => ("text/turtle", true, true),
    "twd" => ("application/vnd.simtech-mindmapper", true, true),
    "twds" => ("application/vnd.simtech-mindmapper", true, true),
    "txd" => ("application/vnd.genomatix.tuxedo", true, true),
    "txf" => ("application/vnd.mobius.txf", true, true),
    "u32" => ("application/x-authorware-bin", true, true),
    "udeb" => ("application/x-debian-package", true, true),
    "ufd" => ("application/vnd.ufdl", true, true),
    "ufdl" => ("application/vnd.ufdl", true, true),
    "ulw" => ("audio/basic", true, true),
    "ulx" => ("application/x-glulx", true, true),
    "umj" => ("application/vnd.umajin", true, true),
    "unityweb" => ("application/vnd.unity", true, true),
    "uoml" => ("application/vnd.uoml+xml", true, true),
    "uri" => ("text/uri-list", true, true),
    "uris" => ("text/uri-list", true, true),
    "urls" => ("text/uri-list", true, true),
    "ustar" => ("application/x-ustar", true, true),
    "utz" => ("application/vnd.uiq.theme", true, true),
    "uu" => ("text/x-uuencode", true, true),
    "uva" => ("audio/vnd.dece.audio", true, true),
    "uvd" => ("application/vnd.dece.data", true, true),
    "uvf" => ("application/vnd.dece.data", true, true),
    "uvg" => ("image/vnd.dece.graphic", true, true),
    "uvh" => ("video/vnd.dece.hd", true, true),
    "uvi" => ("image/vnd.dece.graphic", true, true),
    "uvm" => ("video/vnd.dece.mobile", true, true),
    "uvp" => ("video/vnd.dece.pd", true, true),
    "uvs" => ("video/vnd.dece.sd", true, true),
    "uvt" => ("application/vnd.dece.ttml+xml", true, true),
    "uvu" => ("video/vnd.uvvu.mp4", true, true),
    "uvv" => ("video/vnd.dece.video", true, true),
    "uvva" => ("audio/vnd.dece.audio", true, true),
    "uvvd" => ("application/vnd.dece.data", true, true),
    "uvvf" => ("application/vnd.dece.data", true, true),
    "uvvg" => ("image/vnd.dece.graphic", true, true),
    "uvvh" => ("video/vnd.dece.hd", true, true),
    "uvvi" => ("image/vnd.dece.graphic", true, true),
    "uvvm" => ("video/vnd.dece.mobile", true, true),
    "uvvp" => ("video/vnd.dece.pd", true, true),
    "uvvs" => ("video/vnd.dece.sd", true, true),
    "uvvt" => ("application/vnd.dece.ttml+xml", true, true),
    "uvvu" => ("video/vnd.uvvu.mp4", true, true),
    "uvvv" => ("video/vnd.dece.video", true, true),
    "uvvx" => ("application/vnd.dece.unspecified", true, true),
    "uvvz" => ("application/vnd.dece.zip", true, true),
    "uvx" => ("application/vnd.dece.unspecified", true, true),
    "uvz" => ("application/vnd.dece.zip", true, true),
    "vcard" => ("text/vcard", true, true),
    "vcd" => ("application/x-cdlink", true, true),
    "vcf" => ("text/x-vcard", true, true),
    "vcg" => ("application/vnd.groove-vcard", true, true),
    "vcs" => ("text/x-vcalendar", true, true),
    "vcx" => ("application/vnd.vcx", true, true),
    "vis" => ("application/vnd.visionary", true, true),
    "viv" => ("video/vnd.vivo", true, true),
    "vob" => ("video/x-ms-vob", true, true),
    "vor" => ("application/vnd.stardivision.writer", true, true),
    "vox" => ("application/x-authorware-bin", true, true),
    "vrml" => ("model/vrml", true, true),
    "vsd" => ("application/vnd.visio", true, true),
    "vsf" => ("application/vnd.vsf", true, true),
    "vss" => ("application/vnd.visio", true, true),
    "vst" => ("application/vnd.visio", true, true),
    "vsw" => ("application/vnd.visio", true, true),
    "vtu" => ("model/vnd.vtu", true, true),
    "vxml" => ("application/voicexml+xml", true, true),
    "w3d" => ("application/x-director", true, true),
    "wad" => ("application/x-doom", true, true),
    "wasm" => ("application/wasm", true, true),
    "wav" => ("audio/x-wav", true, true),
    "wax" => ("audio/x-ms-wax", true, true),
    "wbs" => ("application/vnd.criticaltools.wbs+xml", true, true),
    "wbxml" => ("application/vnd.wap.wbxml", true, true),
    "wcm" => ("application/vnd.ms-works", true, true),
    "wdb" => ("application/vnd.ms-works", true, true),
    "wdp" => ("image/vnd.ms-photo", true, true),
    "weba" => ("audio/webm", true, true),
    "webm" => ("video/webm", true, true),
    "wg" => ("application/vnd.pmi.widget", true, true),
    "wgt" => ("application/widget", true, true),
    "wks" => ("application/vnd.ms-works", true, true),
    "wm" => ("video/x-ms-wm", true, true),
    "wma" => ("audio/x-ms-wma", true, true),
    "wmd" => ("application/x-ms-wmd", true, true),
    "wmf" => ("application/x-msmetafile", true, true),
    "wmv" => ("video/x-ms-wmv", true, true),
    "wmx" => ("video/x-ms-wmx", true, true),
    "wmz" => ("application/x-msmetafile", true, true),
    "woff" => ("font/woff", true, true),
    "woff2" => ("font/woff2", true, true),
    "wpd" => ("application/vnd.wordperfect", true, true),
    "wpl" => ("application/vnd.ms-wpl", true, true),
    "wps" => ("application/vnd.ms-works", true, true),
    "wqd" => ("application/vnd.wqd", true, true),
    "wri" => ("application/x-mswrite", true, true),
    "wrl" => ("model/vrml", true, true),
    "wsdl" => ("application/wsdl+xml", true, true),
    "wspolicy" => ("application/wspolicy+xml", true, true),
    "wtb" => ("application/vnd.webturbo", true, true),
    "wvx" => ("video/x-ms-wvx", true, true),
    "x32" => ("application/x-authorware-bin", true, true),
    "x3d" => ("model/x3d+xml", true, true),
    "x3db" => ("model/x3d+binary", true, true),
    "x3dbz" => ("model/x3d+binary", true, true),
    "x3dv" => ("model/x3d+vrml", true, true),
    "x3dvz" => ("model/x3d+vrml", true, true),
    "x3dz" => ("model/x3d+xml", true, true),
    "xaml" => ("application/xaml+xml", true, true),
    "xap" => ("application/x-silverlight-app", true, true),
    "xar" => ("application/vnd.xara", true, true),
    "xbap" => ("application/x-ms-xbap", true, true),
    "xbd" => ("application/vnd.fujixerox.docuworks.binder", true, true),
    "xbm" => ("image/x-xbitmap", true, true),
    "xdf" => ("application/xcap-diff+xml", true, true),
    "xdm" => ("application/vnd.syncml.dm+xml", true, true),
    "xdp" => ("application/vnd.adobe.xdp+xml", true, true),
    "xdssc" => ("application/dssc+xml", true, true),
    "xdw" => ("application/vnd.fujixerox.docuworks", true, true),
    "xenc" => ("application/xenc+xml", true, true),
    "xer" => ("application/patch-ops-error+xml", true, true),
    "xfdf" => ("application/vnd.adobe.xfdf", true, true),
    "xfdl" => ("application/vnd.xfdl", true, true),
    "xht" => ("application/xhtml+xml", true, true),
    "xhtml" => ("application/xhtml+xml", true, true),
    "xhvml" => ("application/xv+xml", true, true),
    "xif" => ("image/vnd.xiff", true, true),
    "xla" => ("application/vnd.ms-excel", true, true),
    "xlam" => ("application/vnd.ms-excel.addin.macroenabled.12", true, true),
    "xlc" => ("application/vnd.ms-excel", true, true),
    "xlf" => ("application/x-xliff+xml", true, true),
    "xlm" => ("application/vnd.ms-excel", true, true),
    "xls" => ("application/vnd.ms-excel", true, true),
    "xlsb" => ("application/vnd.ms-excel.sheet.binary.macroenabled.12", true, true),
    "xlsm" => ("application/vnd.ms-excel.sheet.macroenabled.12", true, true),
    "xlt" => ("application/vnd.ms-excel", true, true),
    "xltm" => ("application/vnd.ms-excel.template.macroenabled.12", true, true),
    "xltx" => ("application/vnd.openxmlformats-officedocument.spreadsheetml.template", true, true),
    "xlw" => ("application/vnd.ms-excel", true, true),
    "xm" => ("audio/xm", true, true),
    "xml" => ("application/xml", false, false),
    "xo" => ("application/vnd.olpc-sugar", true, true),
    "xop" => ("application/xop+xml", true, true),
    "xpi" => ("application/x-xpinstall", true, true),
    "xpl" => ("application/xproc+xml", true, true),
    "xpm" => ("image/x-xpixmap", true, true),
    "xpr" => ("application/vnd.is-xpr", true, true),
    "xps" => ("application/vnd.ms-xpsdocument", true, true),
    "xpw" => ("application/vnd.intercon.formnet", true, true),
    "xpx" => ("application/vnd.intercon.formnet", true, true),
    "xsl" => ("application/xml", true, true),
    "xslt" => ("application/xslt+xml", true, true),
    "xsm" => ("application/vnd.syncml+xml", true, true),
    "xspf" => ("application/xspf+xml", true, true),
    "xul" => ("application/vnd.mozilla.xul+xml", true, true),
    "xvm" => ("application/xv+xml", true, true),
    "xvml" => ("application/xv+xml", true, true),
    "xwd" => ("image/x-xwindowdump", true, true),
    "xyz" => ("chemical/x-xyz", true, true),
    "xz" => ("application/x-xz", true, true),
    "yang" => ("application/yang", true, true),
    "yin" => ("application/yin+xml", true, true),
    "z" => ("application/x-compress", true, true),
    "z1" => ("application/x-zmachine", true, true),
    "z2" => ("application/x-zmachine", true, true),
    "z3" => ("application/x-zmachine", true, true),
    "z4" => ("application/x-zmachine", true, true),
    "z5" => ("application/x-zmachine", true, true),
    "z6" => ("application/x-zmachine", true, true),
    "z7" => ("application/x-zmachine", true, true),
    "z8" => ("application/x-zmachine", true, true),
    "zaz" => ("application/vnd.zzazz.deck+xml", true, true),
    "zip" => ("application/zip", true, true),
    "zir" => ("application/vnd.zul", true, true),
    "zirz" => ("application/vnd.zul", true, true),
    "zmm" => ("application/vnd.handheld-entertainment+xml", true, true)

};

#[derive(Clone)]
pub(crate) struct MimeTypeProperties {
    pub(crate) content_type: String,
    pub(crate) binary: bool,
    pub(crate) attachment: bool,
}

impl MimeTypeProperties {
    pub(crate) fn new(content_type: &str, binary: bool, attachment: bool) -> MimeTypeProperties {
        MimeTypeProperties {
            content_type: content_type.to_string(),
            binary: binary,
            attachment: attachment,
        }
    }

    pub(crate) fn default_extension() -> MimeTypeProperties {
        MimeTypeProperties {
            content_type: "application/octet-stream".to_string(),
            binary: true,
            attachment: true,
        }
    }
}

pub(crate) fn extract_extension(file_name: &str) -> Option<String> {
    let bytes = file_name.as_bytes();
    let size = bytes.len();
    const DOT: u8 = 46;
    for (i, el) in bytes.iter().rev().enumerate() {
        if *el == DOT {
            let slice = &bytes[size - i..size];
            return Some(from_utf8(slice).unwrap().to_string().to_lowercase());
        }
    }
    None
}

pub(crate) fn extract_mime_type(extension_option: Option<String>)
                                -> MimeTypeProperties {
    match extension_option {
        Some(extension) => {
            match MIME_TYPES.get(extension.as_str()) {
                Some(s) => {
                    let (mime, binary, attachment) = s;
                    MimeTypeProperties::new(mime, *binary, *attachment)
                }
                None => MimeTypeProperties::default_extension()
            }
        }
        None => MimeTypeProperties::default_extension()
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn when_extract_extension_should_find_png() {
        test_extension("flower.png", "png");
    }

    #[test]
    fn when_extract_extension_should_find_jpg() {
        test_extension("flower.jpg", "jpg");
    }

    #[test]
    fn when_extract_mime_type_should_extract() {
        test_mime_conversion("flower.png", "image/png");
    }

    #[test]
    fn when_extract_mime_type_jpeg_should_extract() {
        test_mime_conversion("flower.jpeg", "image/jpeg");
    }

    fn test_extension(file_name: &str, expected: &str) {
        let mimetype_option = extract_extension(file_name);
        assert!(mimetype_option.is_some(), "Result should return some");
        let extension = mimetype_option.unwrap();
        assert_eq!(extension, expected.to_string());
    }

    fn test_mime_conversion(file_name: &str, expected: &str) {
        let extension_option = extract_extension(file_name);
        let mime_type = extract_mime_type(extension_option);
        assert_eq!(mime_type.content_type, expected);
    }
}
